(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{155:function(e){e.exports=JSON.parse('{"a":"https://www.osumc-cultural-awareness.com/api/v1"}')},370:function(e,t,n){e.exports=n(519)},519:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(0),o=n.n(c),s=(n(90),n(43)),i=n(59),u=n(307),l=n(45),m=n(306),d=n(301),p=n(127),f=n(526),v=n(527),h=n(22),g=n.n(h),b=n(14),w=n.n(b),E=n(3),y=n(342),x=n(15),k=n(28),O=n(525),P=n(125),j=n(297),S=n(29),I=n(128),C=n(309),R=n(298),T=n(308);function D(e){return o.a.createElement(T.a.Group,{icon:"pencil",style:"web"===x.a.OS?{position:"fixed"}:void 0,open:!1,onPress:function(){return e.onPress()},visible:!0,actions:[],onStateChange:function(){return e.onPress()}})}var A=n(108),z=n(339),U=n(185),N=n(179),L=n(277),F=n(181),q=n(1),B=q.a.create({spinner:{top:"50%",position:"relative"},specialAddInsight:{padding:10,marginVertical:5,marginHorizontal:5},view:{flex:1},card:{padding:10,marginVertical:5,marginHorizontal:5}});function M(e){var t=e.insight,n=e.index,a=e.editing,r=e.onPress,c=e.onAction,s=t.source.data;return o.a.createElement(U.a,{style:B.card,onPress:function(){return a&&r(n)}},o.a.createElement(U.a.Content,null,o.a.createElement(N.a,null,t.summary),o.a.createElement(L.a,null,t.information)),o.a.createElement(U.a.Actions,null,s&&A.a.canOpenURL(s)&&o.a.createElement(F.a,{icon:"link",size:20,onPress:function(){c("copy"),z.a.setString(s)}}),s&&A.a.canOpenURL(s)&&o.a.createElement(F.a,{icon:"login-variant",size:20,onPress:function(){c({type:"open",link:s}),A.a.openURL(s)}}),a&&o.a.createElement(F.a,{icon:"delete",size:20,onPress:function(){c({type:"delete",summary:t.summary}),e.onDelete(n)}})))}var _=n(68),H=n(100);function V(e){var t=e.insights,n=e.onRefresh,a=e.renderItem,r=Object(c.useState)(!1),s=w()(r,2),i=s[0],u=s[1];if(!t)return o.a.createElement(P.a,{animating:!0,size:"large",style:B.spinner});var l=function(){u(!0),n(),u(!1)};return o.a.createElement(H.a,null,o.a.createElement(_.a,{data:t,keyExtractor:function(e,t){return t.toString()},onRefresh:function(){return l()},refreshing:i,renderItem:a}))}function J(e){var t=Object(c.useState)(!1),n=w()(t,2),a=n[0],r=n[1];return o.a.createElement(T.a.Group,{visible:!0,open:a,style:"web"===x.a.OS?{position:"fixed"}:void 0,icon:a?"close":"wrench",actions:[{icon:"plus",onPress:function(){return e.onAdd()}},{icon:"content-save",onPress:function(){return e.onSave()}}],onStateChange:function(){return r(!a)}})}var G=n(6),Y=n.n(G),Z=n(8),$=n.n(Z),W=n(11),K=n.n(W),Q=n(13),X=n.n(Q),ee=n(2),te=n.n(ee),ne=n(113),ae=n.n(ne),re=n(155);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=te()(e);if(t){var r=te()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return X()(this,n)}}var oe,se,ie=function(e){K()(n,e);var t=ce(n);function n(e,a){var r;return Y()(this,n),(r=t.call(this,e)).reason=e,r.statusCode=a,r}return n}(ae()(Error)),ue=function(e){K()(n,e);var t=ce(n);function n(e){var a;return Y()(this,n),(a=t.call(this,"Offline: "+e)).reason=e,a}return n}(ae()(Error)),le=function(){function e(){Y()(this,e)}return $()(e,null,[{key:"get",value:function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.awrap(fetch(""+re.a+encodeURI(e),{method:"GET",headers:{Accept:"application/json"}}));case 3:t=a.sent,a.next=9;break;case 6:throw a.prev=6,a.t0=a.catch(0),new ue(a.t0);case 9:return a.next=11,r.a.awrap(t.json());case 11:if(n=a.sent,t.ok){a.next=14;break}throw new ie(n.msg,t.status);case 14:return a.abrupt("return",n);case 15:case"end":return a.stop()}}),null,null,[[0,6]],Promise)}},{key:"getAuth",value:function(e,t){var n,a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,r.a.awrap(fetch(""+re.a+encodeURI(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t}}));case 3:n=c.sent,c.next=9;break;case 6:throw c.prev=6,c.t0=c.catch(0),new ue(c.t0);case 9:return c.next=11,r.a.awrap(n.json());case 11:if(a=c.sent,n.ok){c.next=14;break}throw new ie(a.msg,n.status);case 14:return c.abrupt("return",a);case 15:case"end":return c.stop()}}),null,null,[[0,6]],Promise)}},{key:"put",value:function(e,t,n){var a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.a.awrap(fetch(""+re.a+encodeURI(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(t)}));case 3:a=o.sent,o.next=9;break;case 6:throw o.prev=6,o.t0=o.catch(0),new ue(o.t0);case 9:return o.next=11,r.a.awrap(a.json());case 11:if(c=o.sent,a.ok){o.next=14;break}throw new ie(c.msg,a.status);case 14:return o.abrupt("return",c);case 15:case"end":return o.stop()}}),null,null,[[0,6]],Promise)}},{key:"delete",value:function(e,t){var n,a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,r.a.awrap(fetch(""+re.a+encodeURI(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}));case 3:n=c.sent,c.next=9;break;case 6:c.prev=6,c.t0=c.catch(0),new ue(c.t0);case 9:return c.next=11,r.a.awrap(n.json());case 11:if(a=c.sent,n.ok){c.next=14;break}throw new ie(a.msg,n.status);case 14:return c.abrupt("return",a);case 15:case"end":return c.stop()}}),null,null,[[0,6]],Promise)}},{key:"post",value:function(e,t,n){var a,c,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a={Accept:"application/json","Content-Type":"application/json"},void 0!==n&&(a.Authorization="Bearer "+n),s.prev=2,s.next=5,r.a.awrap(fetch(""+re.a+encodeURI(e),{method:"POST",headers:a,body:JSON.stringify(t)}));case 5:c=s.sent,s.next=11;break;case 8:throw s.prev=8,s.t0=s.catch(2),new ue(s.t0);case 11:return s.next=13,r.a.awrap(c.json());case 13:if(o=s.sent,c.ok){s.next=16;break}throw new ie(o.msg,c.status);case 16:return s.abrupt("return",o);case 17:case"end":return s.stop()}}),null,null,[[2,8]],Promise)}}]),e}(),me=function(){function e(t,n,a=!1){Y()(this,e),this.name=t,this.email=n,this.superUser=a}return $()(e,null,[{key:"get",value:function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(le.getAuth("/admins/"+e,t));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"login",value:function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(le.post("/login",{email:e,password:t}));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"list",value:function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(le.getAuth("/admins",e));case 2:return t=n.sent,n.abrupt("return",t.admins);case 4:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"invite",value:function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(le.post("/admins/invite",{email:e},t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"update",value:function(e,t,n){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(le.put("/admins/"+e,{name:t},n));case 2:case"end":return a.stop()}}),null,null,null,Promise)}},{key:"updatePassword",value:function(e,t,n,a){return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(le.put("/admins/"+e,{password:t,password_confirmation:n},a));case 2:case"end":return c.stop()}}),null,null,null,Promise)}},{key:"recover",value:function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(le.post("/admins/recover",{email:e}));case 2:return t=n.sent,n.abrupt("return",t.msg);case 4:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"delete",value:function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(le.delete("/admins/"+e,t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}},{key:"create",value:function(e,t,n,a,c){var o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(le.post("/register",{name:e,email:t,password:n,password_confirmation:a},c));case 2:return o=s.sent,s.abrupt("return",o);case 4:case"end":return s.stop()}}),null,null,null,Promise)}}]),e}(),de=function(){function e(t,n,a,r){Y()(this,e),this.name=t,this.generalInsights=n,this.specializedInsights=a,this.modified=r}return $()(e,[{key:"create",value:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(le.post("/culture",{name:this.name,general_insights:this.generalInsights,specialized_insights:this.specializedInsights},e));case 2:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"update",value:function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={},this.specializedInsights.forEach((function(e,n){return t[n]=e})),n={general_insights:this.generalInsights,specialized_insights:t,name:this.name},a.next=5,r.a.awrap(le.put("/cultures/"+this.name,n,e));case 5:case"end":return a.stop()}}),null,this,null,Promise)}}],[{key:"get",value:function(e){var t,n,a,c,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(le.get("/cultures/"+e));case 2:return t=s.sent,n=t.name,a=t.general_insights,c=t.specialized_insights,o=t.modified,s.abrupt("return",new this(n,a,new Map(Object.entries(c)),o));case 5:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"list",value:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(le.get("/cultures"));case 2:return e=t.sent,t.abrupt("return",e.cultures);case 4:case"end":return t.stop()}}),null,null,null,Promise)}},{key:"delete",value:function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(le.delete("/cultures/"+e,t));case 2:case"end":return n.stop()}}),null,null,null,Promise)}}]),e}(),pe=n(249);!function(e){function t(){var e,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(l.a.getItem("@ledger"));case 2:if(e=n.sent){n.next=5;break}return n.abrupt("return",new Map);case 5:return t=JSON.parse(e).cultures,n.abrupt("return",new Map(Object.entries(t)));case 7:case"end":return n.stop()}}),null,null,null,Promise)}function n(e){var t={cultures:{}};e.forEach((function(e,n){return t.cultures[n]=e})),l.a.setItem("@ledger",JSON.stringify(t))}function a(e){var a,c,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(de.get(e));case 2:return a=s.sent,c=pe.deflate(JSON.stringify(a),{to:"string"}),l.a.setItem(e,c.toString()),s.next=7,r.a.awrap(t());case 7:(o=s.sent).set(e,a.modified),n(o);case 10:case"end":return s.stop()}}),null,null,null,Promise)}e.update=function(){var e,n;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(de.list());case 2:return e=c.sent,c.next=5,r.a.awrap(t());case 5:n=c.sent,e.forEach((function(e){var t,c;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.name,c=e.modified,n.has(t)&&n.get(t)<c&&a(t);case 2:case"end":return r.stop()}}),null,null,null,Promise)}));case 7:case"end":return c.stop()}}),null,null,null,Promise)},e.list=t,e.read=function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(l.a.getItem(e));case 2:if(t=a.sent){a.next=5;break}throw new Error(e+": culture download not found");case 5:return n=pe.inflate(t,{to:"string"}),a.abrupt("return",JSON.parse(n));case 7:case"end":return a.stop()}}),null,null,null,Promise)},e.add=a,e.remove=function(e){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.a.awrap(t());case 2:(a=c.sent).has(e)&&l.a.removeItem(e),a.delete(e),n(a);case 6:case"end":return c.stop()}}),null,null,null,Promise)}}(oe||(oe={})),(se||(se={})).send=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(le.post("/feedback",{feedback:e}));case 2:case"end":return t.stop()}}),null,null,null,Promise)};var fe=Object(O.a)(),ve={summary:"summary",information:"information",source:{data:"www.example.com",type:"link"}};var he=Object(s.b)((function(e,t){return{token:e.user.token,navigation:t.navigation,route:t.route}}),null)((function(e){var t=e.route.params?e.route.params.cultureName:"",n=e.token||"",a=e.navigation,s=Object(c.useState)(null),i=w()(s,2),u=i[0],l=i[1],m=Object(c.useState)(!1),d=w()(m,2),p=d[0],f=d[1],v=Object(c.useState)(""),h=w()(v,2),b=h[0],O=h[1],T=Object(c.useState)(!1),A=w()(T,2),z=A[0],U=A[1],N=Object(c.useState)(e.route.params.dirty||!1),L=w()(N,2),F=L[0],q=L[1],_=Object(k.useRoute)();Object(c.useEffect)((function(){return e.navigation.setOptions({title:t})}),[t]),Object(c.useEffect)((function(){G()}),[]),o.a.useEffect((function(){return a.addListener("beforeRemove",(function(t){(F||e.route.params.dirty)&&(t.preventDefault(),"web"===x.a.OS?confirm("You have unsaved changes. Are you sure you want to discard them and leave the screen?")&&a.dispatch(t.data.action):y.a.alert("Discard changes?","You have unsaved changes. Are you sure you want to discard them and leave the screen?",[{text:"Don't leave",style:"cancel",onPress:function(){}},{text:"Discard",style:"destructive",onPress:function(){return a.dispatch(t.data.action)}}],{cancelable:!1}))}))}),[a,F,e.route.params.dirty]);var H=function(e){var t=new de(e.name,e.generalInsights,e.specializedInsights,e.modified);q(!0),l(t)},G=function(){var a,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.a.awrap(de.get(t));case 3:a=o.sent,l(a),o.next=20;break;case 7:return o.prev=7,o.t0=o.catch(0),o.prev=9,o.next=12,r.a.awrap(oe.read(t));case 12:c=o.sent,l(c),o.next=20;break;case 16:o.prev=16,o.t1=o.catch(9),console.error(o.t1),n?(U(!0),f(!0),l(new de(t,[],new Map,Date.now()))):e.navigation.navigate("Home");case 20:case"end":return o.stop()}}),null,null,[[0,7],[9,16]],Promise)},Y=function(){return O("")},Z=function(e){if("copy"!==e)switch(e.type){case"open":O("Opening "+e.link);break;case"delete":O("Deleting "+e.summary)}else O("Link copied!")};if(!u)return o.a.createElement(P.a,{animating:!0,size:"large",style:B.spinner});var $=function(e){if(e instanceof Array){var t=w()(e,2),n=t[0],a=t[1],r=u.specializedInsights.get(n);r.splice(a,1),u.specializedInsights.set(n,r),0===r.length&&u.specializedInsights.delete(n)}else u.generalInsights.splice(e,1);H(u)},W=function(t,n){return o.a.createElement(M,{key:"insight-card-"+n.toString(),index:n,editing:p,insight:t,onAction:Z,onPress:function(t){return e.navigation.navigate("EditInsight",{culture:u,index:t})},onDelete:$})};return o.a.createElement(E.a,{style:B.view},""!==n&&o.a.createElement(j.a,{icon:"alert",visible:z,actions:[{label:"Ok",onPress:function(){return U(!1)}}]},"Welcome to a brand new Culture!\n\n1. To add a new insight hit the tool button\n2. To edit an insight click on it\n3. Don't forget to save!\n"),o.a.createElement(fe.Navigator,{initialRouteName:"general"},o.a.createElement(fe.Screen,{name:"general"},(function(){return o.a.createElement(V,{renderItem:function(e){return W(e.item,e.index)},onRefresh:function(){G(),q(!1)},insights:u.generalInsights})})),o.a.createElement(fe.Screen,{name:"specialized"},(function(){return o.a.createElement(V,{insights:Array.from(u.specializedInsights.entries()),onRefresh:function(){G(),q(!1)},renderItem:function(e){var t=w()(e.item,2),n=t[0],a=t[1];return o.a.createElement(S.b.Accordion,{title:n,id:e.index},a.map((function(e,t){return W(e,[n,t])})),p&&o.a.createElement(I.a,{icon:"plus",onPress:function(){return e=n,u.specializedInsights.set(e,[].concat(g()(u.specializedInsights.get(e)),[ve])),void H(u);var e},mode:"contained",style:B.specialAddInsight},""))}})}))),""!==n&&p&&o.a.createElement(J,{onSave:function(){return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,r.a.awrap(u.update(n));case 3:if(H(u),q(!1),a.setParams({cultureName:t,dirty:!1,prevName:e.route.params.prevName}),!e.route.params.prevName){c.next=15;break}return c.prev=7,c.next=10,r.a.awrap(de.delete(e.route.params.prevName,n));case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(7),O(c.t0.toString());case 15:c.next=21;break;case 17:c.prev=17,c.t1=c.catch(0),O(c.t1.toString()),console.error(c.t1);case 21:f(!p);case 22:case"end":return c.stop()}}),null,null,[[0,17],[7,12]],Promise)},onAdd:function(){var e;switch(null!=(e=Object(k.getFocusedRouteNameFromRoute)(_))?e:"general"){case"general":u.generalInsights.push(ve);break;case"specialized":u.specializedInsights.set("Specialized Insight",[ve])}H(u)}}),""!==n&&!p&&o.a.createElement(D,{onPress:function(){return f(!p)}}),o.a.createElement(C.a,null,o.a.createElement(R.a,{visible:""!==b,onDismiss:Y,action:{label:"Ok",onPress:Y}},b)))})),ge=n(303),be=n(299),we=n(305),Ee=n(79),ye=n(12),xe=n.n(ye);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){xe()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe={user:Oe({},new me("","")),token:""},je=function(e){return{type:"UPDATE_USER",payload:e}},Se=function(){return{type:"RESET_USER",payload:{}}},Ie=function(e){return{type:"UPDATE_THEME",payload:e}},Ce=Object(i.b)({theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Dark",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_THEME":return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Oe({},t.payload);case"RESET_USER":return Oe({},Pe);default:return e}}}),Re=n(41),Te=Re.a().shape({email:Re.c().email("Invalid email address").required("Required"),password:Re.c().required("Required")}),De={email:"",password:""},Ae=q.a.create({view:{flex:1,justifyContent:"space-evenly",margin:15,overflow:"hidden"},recover:{position:"absolute",bottom:5}});var ze=Object(s.b)(null,(function(e){return Object(i.a)({updateUser:je},e)}))((function(e){var t=Object(c.useState)(!1),n=w()(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),u=w()(i,2),m=u[0],d=u[1],p=Object(c.useState)(!0),f=w()(p,2),v=f[0],h=f[1],g=Object(c.useRef)(),b=Object(c.useRef)(),y=Object(Ee.a)({validationSchema:Te,initialValues:De,onSubmit:function(e){return A(e)}}),x=y.values,O=y.handleChange,P=y.handleBlur,j=y.errors,S=y.touched,C=y.handleSubmit,T=y.setFieldValue,D=y.validateField;Object(c.useEffect)((function(){!function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(l.a.getItem("@rememberedEmail"));case 2:(e=t.sent)&&(T("email",e),s(!0));case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]);var A=function(t){var n,c,o,s,i;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.email,c=t.password,o=e.navigation,s=e.updateUser,u.prev=2,u.next=5,r.a.awrap(me.login(n,c));case 5:i=u.sent,u.next=12;break;case 8:return u.prev=8,u.t0=u.catch(2),d(u.t0.toString()),u.abrupt("return");case 12:if(u.prev=12,!a){u.next=18;break}return u.next=16,r.a.awrap(l.a.setItem("@rememberedEmail",n));case 16:u.next=20;break;case 18:return u.next=20,r.a.awrap(l.a.removeItem("@rememberedEmail"));case 20:u.next=25;break;case 22:u.prev=22,u.t1=u.catch(12),console.error("Failed to set Remembered Email",u.t1);case 25:s(i),o.dispatch(k.CommonActions.reset({index:1,routes:[{name:"Home"}]}));case 27:case"end":return u.stop()}}),null,null,[[2,8],[12,22]],Promise)};return o.a.createElement(E.a,{style:Ae.view},o.a.createElement(E.a,null,o.a.createElement(ge.a,{autoFocus:!0,textContentType:"emailAddress",mode:"outlined",error:j.email&&S.email,left:o.a.createElement(ge.a.Icon,{name:"email"}),label:"email",ref:g,value:x.email,onBlur:P("email"),onChangeText:O("email")}),j.email&&S.email&&o.a.createElement(be.a,{type:"error"},j.email)),o.a.createElement(E.a,null,o.a.createElement(ge.a,{mode:"outlined",label:"password",ref:b,left:o.a.createElement(ge.a.Icon,{name:"lock"}),secureTextEntry:v,error:j.password&&S.password,onBlur:P("password"),value:x.password,onChangeText:O("password"),right:o.a.createElement(ge.a.Icon,{name:v?"eye":"eye-off",onPress:function(){return h(!v)}})}),j.password&&S.password&&o.a.createElement(be.a,{type:"error"},j.password)),o.a.createElement(we.a.Item,{label:"Remember me",status:a?"checked":"unchecked",onPress:function(){return s(!a)}}),o.a.createElement(I.a,{mode:"contained",onPress:C},"Log In"),o.a.createElement(I.a,{style:Ae.recover,mode:"text",onPress:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(D("email"));case 2:if(void 0!==j.email){e.next=15;break}return e.prev=3,e.next=6,r.a.awrap(me.recover(x.email));case 6:d("Sent email to "+x.email),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("Failed to send recovery email: ",e.t0),d(e.t0.toString());case 13:e.next=16;break;case 15:d("Account recovery requires a valid Email");case 16:case"end":return e.stop()}}),null,null,[[3,9]],Promise)},uppercase:!1},"Trouble logging in?"),o.a.createElement(R.a,{visible:""!==m,onDismiss:function(){return d("")},action:{label:"Ok",onPress:function(){return d("")}}},m))})),Ue=n(32),Ne={name:"This is how other administrators will see you. You can always change this later.",email:"You'll need this if you ever forget your password.",password:"Strong passwords include a mix of lower case letters, uppercase letters, numbers, and special characters.",passwordConfirmation:"Double check that you know the password."},Le=Re.a().shape({name:Re.c().min(2,"Too short").max(64,"Too long").required("Required"),email:Re.c().email("Invalid email address").required("Required"),password:Re.c().required("Required").min(8,"Must be at least 8 characters").max(64,"Too long").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]/,"Must contain at least one uppercase letter, one lowercase letter, one number and one special character"),passwordConfirmation:Re.c().required("Required").oneOf([Re.b("password"),null],"Must match password")}),Fe={name:"",email:"",password:"",passwordConfirmation:""},qe=q.a.create({view:{flex:1,justifyContent:"space-evenly",margin:15,overflow:"hidden"},link:{color:"blue",fontWeight:"bold"}});var Be=Object(s.b)(null,(function(e){return Object(i.a)({updateUser:je},e)}))((function(e){var t=e.route.params?e.route.params.token:"",n=Object(c.useState)(!0),a=w()(n,2),s=a[0],i=a[1],u=Object(c.useState)(!0),l=w()(u,2),m=l[0],d=l[1],p=Object(c.useState)(""),f=w()(p,2),v=f[0],h=f[1],g=Object(c.useState)("email"),b=w()(g,2),y=b[0],x=b[1],O=Object(c.useRef)(),P=Object(c.useRef)(),j=Object(c.useRef)(),S=Object(c.useRef)(),C=Object(Ee.a)({validationSchema:Le,initialValues:Fe,onSubmit:function(e){return F(e)}}),T=C.values,D=C.handleChange,z=C.handleBlur,U=C.errors,N=C.touched,L=C.handleSubmit,F=function(n){var a,c,o,s,i,u,l;return r.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a=n.name,c=n.email,o=n.password,s=n.passwordConfirmation,i=e.navigation,u=e.updateUser,m.prev=2,m.next=5,r.a.awrap(me.create(a,c,o,s,t));case 5:l=m.sent,m.next=12;break;case 8:return m.prev=8,m.t0=m.catch(2),h(m.t0.toString()),m.abrupt("return");case 12:u(l),i.dispatch(k.CommonActions.reset({index:1,routes:[{name:"Home"}]}));case 14:case"end":return m.stop()}}),null,null,[[2,8]],Promise)},q=function(e){var t=e.fieldName;return y===t||U[t]&&N[t]?U[t]&&N[t]?o.a.createElement(be.a,{type:"error"},U[t]):o.a.createElement(be.a,{type:"info"},Ne[t]):null};return o.a.createElement(E.a,{style:qe.view},o.a.createElement(E.a,null,o.a.createElement(ge.a,{autoFocus:!0,textContentType:"emailAddress",onFocus:function(){return x("email")},mode:"outlined",error:U.email&&N.email,left:o.a.createElement(ge.a.Icon,{name:"email"}),label:"email",ref:P,value:T.email,onChangeText:D("email"),onBlur:z("email")}),o.a.createElement(q,{fieldName:"email"})),o.a.createElement(E.a,null,o.a.createElement(ge.a,{textContentType:"name",onFocus:function(){return x("name")},mode:"outlined",error:U.name&&N.name,left:o.a.createElement(ge.a.Icon,{name:"account"}),label:"name",ref:O,value:T.name,onChangeText:D("name"),onBlur:z("name")}),o.a.createElement(q,{fieldName:"name"})),o.a.createElement(E.a,null,o.a.createElement(ge.a,{mode:"outlined",label:"password",onFocus:function(){return x("password")},ref:j,left:o.a.createElement(ge.a.Icon,{name:"lock"}),secureTextEntry:s,error:U.password&&N.password,onBlur:z("password"),value:T.password,onChangeText:D("password"),right:o.a.createElement(ge.a.Icon,{name:s?"eye":"eye-off",onPress:function(){return i(!s)}})}),o.a.createElement(q,{fieldName:"password"})),o.a.createElement(E.a,null,o.a.createElement(ge.a,{mode:"outlined",label:"password confirmation",onFocus:function(){return x("passwordConfirmation")},ref:S,left:o.a.createElement(ge.a.Icon,{name:"shield-lock"}),secureTextEntry:m,error:U.passwordConfirmation&&N.passwordConfirmation,onBlur:z("passwordConfirmation"),value:T.passwordConfirmation,onChangeText:D("passwordConfirmation"),right:o.a.createElement(ge.a.Icon,{name:m?"eye":"eye-off",onPress:function(){return d(!m)}})}),o.a.createElement(q,{fieldName:"passwordConfirmation"})),o.a.createElement(E.a,null,o.a.createElement(Ue.a,null,"By clicking Register, you are indicating that you have read and acknowledged the",o.a.createElement(Ue.a,{onPress:function(){return A.a.openURL("http://www.google.com")},style:qe.link}," ","Terms of Service"),".")),o.a.createElement(I.a,{mode:"contained",onPress:L},"Register"),o.a.createElement(R.a,{visible:""!==v,onDismiss:function(){return h("")},action:{label:"Ok",onPress:function(){return h("")}}},v))})),Me=n(310),_e=n(84),He=n(123);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){xe()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=Je(Je({},_e.a),{},{roundness:2,colors:Je(Je({},_e.a.colors),{},{primary:"#1e88e5",accent:"#1e88e5"})}),Ye=Je(Je({},He.a),{},{roundness:2,colors:Je(Je({},He.a.colors),{},{primary:"#1e88e5",accent:"#1e88e5"})}),Ze=q.a.create({spinner:{top:"50%",position:"relative"},view:{flex:1},modalLight:{margin:40,padding:40,backgroundColor:Ge.colors.background},modalDark:{margin:40,padding:40,backgroundColor:Ye.colors.background},list:{flex:1},div:{margin:"5px"},deleteButton:{backgroundColor:"red"}});function $e(e){var t=e.cultures,n=e.onRefresh,a=e.token,c=e.offline;if(!t)return o.a.createElement(P.a,{animating:!0,size:"large",style:Ze.spinner});return o.a.createElement(E.a,null,o.a.createElement(_.a,{data:t,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var s=t.item;return o.a.createElement(S.b.Item,{title:s.name,onPress:function(){return e.navigation.navigate("Culture",{cultureName:s.name})},right:function(){return o.a.createElement(E.a,{style:{flex:1,flexDirection:"row",justifyContent:"flex-end"}},!c&&o.a.createElement(F.a,{icon:"download",onPress:function(){return oe.add(s.name)}}),""!==a&&o.a.createElement(F.a,{icon:"delete",onPress:function(){return e=s,r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(de.delete(e.name,a));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Failed to delete culture",t.t0);case 8:n();case 9:case"end":return t.stop()}}),null,null,[[0,5]],Promise);var e}}))}})}}))}var We=Re.a().shape({email:Re.c().email("Invalid email address").required("Required")}),Ke=Re.a().shape({email:Re.c().email("Invalid email address").required("Required"),name:Re.c().required("Required")}),Qe={email:"",name:""};var Xe=Object(s.b)((function(e){return{user:e.user.user,theme:e.theme}}),null)((function(e){var t=e.user,n=e.theme,a=e.token,s=e.admins,i=e.onRefresh,u=Object(c.useState)(!1),l=w()(u,2),m=l[0],d=l[1],p=Object(c.useState)(!1),f=w()(p,2),v=f[0],h=f[1],g=Object(c.useState)(null),b=w()(g,2),y=b[0],x=b[1],k=Object(c.useState)(""),O=w()(k,2),P=O[0],j=O[1],T=Object(c.useRef)(),D=Object(Ee.a)({validationSchema:Ke,initialValues:Qe,onSubmit:function(e){return H(e)}}),A=D.values,z=D.handleChange,U=D.handleBlur,N=D.errors,L=D.touched,q=D.handleSubmit,B=(D.validateField,D.setFieldValue),M=function(){return j("")},H=function(t){var n,a;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.name,a=t.email;try{me.update(a,n,e.token),h(!1),i()}catch(c){}case 2:case"end":return r.stop()}}),null,null,null,Promise)};return o.a.createElement(_.a,{style:{flex:1},data:s,keyExtractor:function(e,t){return t.toString()},renderItem:function(c){var s=c.item;return o.a.createElement(E.a,null,o.a.createElement(S.b.Item,{title:s.email,right:function(){return""!==e.token&&o.a.createElement(E.a,{style:{flexDirection:"row"}},o.a.createElement(F.a,{icon:"pencil",onPress:function(){return B("name",(e=s).name),B("email",e.email),void h(!0);var e}}),function(e){if(!e.superUser&&e.email!=t.email)return o.a.createElement(F.a,{icon:"delete",onPress:function(){d(!0),x(e)}})}(s))}}),o.a.createElement(C.a,null,m&&o.a.createElement(Me.a,{visible:m,contentContainerStyle:"Dark"===n?Ze.modalDark:Ze.modalLight,onDismiss:function(){return d(!1)}},o.a.createElement(Ue.a,null,"Are you sure you want to delete ",y.email,"?"),o.a.createElement(I.a,{mode:"contained",onPress:function(){r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.awrap(me.delete(y.email,a));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:i();case 8:case"end":return e.stop()}}),null,null,[[0,5]],Promise),d(!1)},style:Ze.deleteButton},"Delete"))),o.a.createElement(C.a,null,v&&o.a.createElement(Me.a,{visible:v,contentContainerStyle:"Dark"===n?Ze.modalDark:Ze.modalLight,onDismiss:function(){return h(!1)}},o.a.createElement(Ue.a,null,"Edit admin Account"),o.a.createElement(ge.a,{mode:"outlined",left:o.a.createElement(ge.a.Icon,{name:"email"}),label:"email",value:A.email,disabled:!0}),o.a.createElement(ge.a,{autoFocus:!0,textContentType:"name",mode:"outlined",left:o.a.createElement(ge.a.Icon,{name:"account-badge"}),error:N.name&&L.name,label:"name",value:A.name,ref:T,onBlur:U("name"),onChangeText:z("name")}),o.a.createElement(E.a,{style:Ze.div}),o.a.createElement(I.a,{mode:"contained",onPress:q},"Save"))),o.a.createElement(C.a,null,o.a.createElement(R.a,{visible:""!==P,onDismiss:M,action:{label:"Ok",onPress:M}},P)))}})})),et={email:""},tt=Object(O.a)();var nt=Object(s.b)((function(e,t){return{navigation:t.navigation,route:t.route,user:e.user.user,token:e.user.token,theme:e.theme}}),null)((function(e){var t=e.token,n=e.route,a=e.navigation,s=e.user,i=e.theme,u=Object(c.useState)(null),l=w()(u,2),m=l[0],d=l[1],p=Object(c.useState)(null),f=w()(p,2),v=f[0],h=f[1],b=o.a.useState(!1),y=w()(b,2),O=y[0],j=y[1],S=Object(c.useState)(""),D=w()(S,2),A=D[0],z=D[1],U=Object(c.useState)(!1),N=w()(U,2),L=N[0],F=N[1],q=Object(c.useRef)(),B=Object(Ee.a)({validationSchema:We,initialValues:et,onSubmit:function(e){return W(e)}}),M=B.values,_=B.handleChange,H=B.handleBlur,V=B.errors,J=B.touched,G=B.handleSubmit,Y=B.validateField,Z=function(){var e,t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.awrap(de.list());case 3:e=a.sent,d(e),a.next=26;break;case 7:if(a.prev=7,a.t0=a.catch(0),!(a.t0 instanceof ue)){a.next=25;break}return a.prev=10,a.next=13,r.a.awrap(oe.list());case 13:t=a.sent,n=[],t.forEach((function(e,t){return n.push({name:t,modified:n[t]})})),d(n),F(!0),a.next=23;break;case 20:a.prev=20,a.t1=a.catch(10),z(a.t1.toString());case 23:a.next=26;break;case 25:z(a.t0.toString());case 26:case"end":return a.stop()}}),null,null,[[0,7],[10,20]],Promise)};Object(c.useEffect)((function(){Z()}),[]);var $=function(){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.token){a.next=2;break}return a.abrupt("return");case 2:if(!s.superUser){a.next=8;break}return a.next=5,r.a.awrap(me.list(t));case 5:a.t0=a.sent,a.next=9;break;case 8:a.t0=[s];case 9:n=a.t0,h(n);case 11:case"end":return a.stop()}}),null,null,null,Promise)};if(Object(c.useEffect)((function(){$()}),[]),!t)return o.a.createElement($e,{navigation:e.navigation,token:"",cultures:m,onRefresh:function(){return Z()},offline:L});var W=function(e){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.email,a.next=3,r.a.awrap(Y("email"));case 3:return a.prev=3,a.next=6,r.a.awrap(me.invite(n,t));case 6:j(!1),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),z(a.t0.toString());case 12:case"end":return a.stop()}}),null,null,[[3,9]],Promise)},K=function(){return z("")},Q={position:"web"===x.a.OS?"fixed":"absolute",margin:16,right:0,bottom:0};return v?o.a.createElement(E.a,{style:Ze.view},o.a.createElement(tt.Navigator,{initialRouteName:"Cultures"},o.a.createElement(tt.Screen,{name:"Cultures"},(function(){return o.a.createElement($e,{navigation:a,token:t,cultures:m,onRefresh:function(){return Z()},offline:L})})),o.a.createElement(tt.Screen,{name:"Admins"},(function(){return o.a.createElement(Xe,{token:t,admins:v,onRefresh:function(){return $()}})}))),o.a.createElement(T.a,{style:Q,icon:"plus",onPress:function(){var e;switch(null!=(e=Object(k.getFocusedRouteNameFromRoute)(n))?e:"Cultures"){case"Cultures":d([].concat(g()(m),[{name:"New Culture",modified:Date.now()}]));break;case"Admins":j(!0)}}}),o.a.createElement(C.a,null,o.a.createElement(R.a,{visible:""!=A,onDismiss:function(){return z("")},action:{label:"Undo",onPress:function(){return z("")}}},A),o.a.createElement(Me.a,{visible:O,contentContainerStyle:"Dark"===i?Ze.modalDark:Ze.modalLight,onDismiss:function(){return j(!1)}},o.a.createElement(Ue.a,null,"Invite a new admin"),o.a.createElement(ge.a,{autoFocus:!0,textContentType:"emailAddress",mode:"outlined",left:o.a.createElement(ge.a.Icon,{name:"email"}),error:V.email&&J.email,label:"email",value:M.email,ref:q,onBlur:H("email"),onChangeText:_("email")}),o.a.createElement(E.a,{style:Ze.div}),o.a.createElement(I.a,{mode:"contained",onPress:G},"Send Invite"))),o.a.createElement(C.a,null,o.a.createElement(R.a,{visible:""!==A,onDismiss:K,action:{label:"Ok",onPress:K}},A))):o.a.createElement(P.a,{animating:!0,size:"large",style:Ze.spinner})})),at=n(300),rt=n(304),ct=q.a.create({view:{flex:1,justifyContent:"space-evenly",overflow:"hidden"},fab:{position:"absolute",bottom:0,right:0,margin:16},input:{paddingHorizontal:10,margin:5}});var ot=function(e){var t=e.route.params.index,n=e.route.params.culture,a=t instanceof Array,r=t instanceof Array?n.specializedInsights.get(t[0])[t[1]]:n.generalInsights[t],s=t instanceof Array?t[0]:"";Object(c.useEffect)((function(){return e.navigation.setOptions({title:r.summary})}),[]);var i=Object(c.useState)(s),u=w()(i,2),l=u[0],m=u[1],d=Object(c.useState)(r.summary),p=w()(d,2),f=p[0],v=p[1],h=Object(c.useState)(r.information),g=w()(h,2),b=g[0],E=g[1],y=Object(c.useState)(r.source.data),x=w()(y,2),k=x[0],O=x[1],P=Object(c.useState)(r.source.type),j=w()(P,2),S=j[0],I=j[1],R=Object(c.useState)(n.name),D=w()(R,2),A=D[0],z=D[1];return o.a.createElement(H.a,{style:ct.view},o.a.createElement(ge.a,{style:ct.input,value:A,placeholder:"Culture Name",label:"Culture Name",mode:"outlined",onChangeText:function(e){return z(e)}}),a&&o.a.createElement(ge.a,{style:ct.input,value:l,placeholder:"Title",label:"Title",mode:"outlined",onChangeText:function(e){return m(e)}}),a&&o.a.createElement(at.a,null),o.a.createElement(ge.a,{style:ct.input,value:f,placeholder:"Summary",label:"Summary",mode:"outlined",left:o.a.createElement(ge.a.Icon,{name:"text-short"}),onChangeText:function(e){return v(e)}}),o.a.createElement(ge.a,{style:ct.input,value:b,mode:"outlined",placeholder:"Description",label:"Description",left:o.a.createElement(ge.a.Icon,{name:"text-subject"}),numberOfLines:5,onChangeText:function(e){return E(e)},multiline:!0}),o.a.createElement(at.a,null),o.a.createElement(N.a,{style:{margin:10}},"Source Type"),o.a.createElement(rt.a.Group,{onValueChange:function(e){return I(e)},value:S},o.a.createElement(rt.a.Item,{label:"Link",value:"link"})),o.a.createElement(at.a,null),o.a.createElement(ge.a,{style:ct.input,value:k,label:"Source",placeholder:"Source Information",left:o.a.createElement(ge.a.Icon,{name:"book"}),mode:"outlined",onChangeText:function(e){return O(e)}}),o.a.createElement(C.a,null,o.a.createElement(T.a,{style:ct.fab,icon:"check",onPress:function(){var a={summary:f,information:b,source:{data:k,type:S}};if(t instanceof Array){var c=w()(t,2),o=c[0],i=c[1],u=n.specializedInsights.get(o);u[i]=a,l!==t[0]&&(n.specializedInsights.delete(o),n.specializedInsights.set(l,u))}else n.generalInsights[t]=a;var m=n.name,d=s!==l||f!==r.summary||b!==r.information||k!==r.source.data||S!==r.source.type||A!==m;n.name=A,e.navigation.navigate("Culture",{cultureName:n.name,prevName:m,dirty:d})}})))},st=Re.a().shape({password:Re.c().required("Required").min(8,"Must be at least 8 characters").max(64,"Too long").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]/,"Must contain at least one uppercase letter, one lowercase letter, one number and one special character"),passwordConfirmation:Re.c().required("Required").oneOf([Re.b("password"),null],"Must match password")}),it={password:"",passwordConfirmation:""},ut=q.a.create({view:{flex:1,justifyContent:"space-evenly",overflow:"hidden"},input:{margin:5,padding:15},title:{alignSelf:"center"}});var lt=function(e){var t=e.route,n=e.navigation,a=t.params?t.params.email:"",s=t.params?t.params.token:"",i=Object(c.useState)(""),u=w()(i,2),l=u[0],m=u[1],d=Object(c.useState)(!0),p=w()(d,2),f=p[0],v=p[1],h=Object(c.useState)(!0),g=w()(h,2),b=g[0],y=g[1],x=Object(c.useRef)(),k=Object(c.useRef)(),O=Object(Ee.a)({validationSchema:st,initialValues:it,onSubmit:function(e){return A(e)}}),P=O.values,j=O.handleChange,S=O.handleBlur,C=O.errors,T=O.touched,D=O.handleSubmit,A=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(me.updatePassword(a,e.password,e.passwordConfirmation,s));case 3:n.navigate("Login"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),m(t.t0.toString()),console.error("Failed to update account: ",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,6]],Promise)};return o.a.createElement(E.a,{style:ut.view},o.a.createElement(N.a,{style:ut.title},"Let's create a new password!"),o.a.createElement(E.a,{style:ut.input},o.a.createElement(ge.a,{mode:"outlined",label:"password",ref:x,left:o.a.createElement(ge.a.Icon,{name:"lock"}),secureTextEntry:f,error:C.password&&T.password,onBlur:S("password"),value:P.password,onChangeText:j("password"),right:o.a.createElement(ge.a.Icon,{name:f?"eye":"eye-off",onPress:function(){return v(!f)}})}),C.password&&T.password&&o.a.createElement(be.a,{type:"error"},C.password)),o.a.createElement(E.a,{style:ut.input},o.a.createElement(ge.a,{mode:"outlined",label:"password confirmation",ref:k,left:o.a.createElement(ge.a.Icon,{name:"shield-lock"}),secureTextEntry:b,error:C.passwordConfirmation&&T.passwordConfirmation,onBlur:S("passwordConfirmation"),value:P.passwordConfirmation,onChangeText:j("passwordConfirmation"),right:o.a.createElement(ge.a.Icon,{name:b?"eye":"eye-off",onPress:function(){return y(!b)}})}),C.passwordConfirmation&&T.passwordConfirmation&&o.a.createElement(be.a,{type:"error"},C.passwordConfirmation)),o.a.createElement(I.a,{mode:"contained",onPress:D},"Recover"),o.a.createElement(R.a,{visible:""!==l,onDismiss:function(){return m("")},action:{label:"Ok",onPress:function(){return m("")}}},l))},mt=n(19),dt=n.n(mt),pt=n(67);var ft=Object(s.b)((function(e){return{theme:e.theme}}),(function(e){return Object(i.a)({updateTheme:Ie},e)}))((function(e){var t=e.updateTheme,n=e.theme;Object(c.useEffect)((function(){!function(){var e;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.a.awrap(l.a.getItem("@theme"));case 3:e=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),e="Light";case 9:e||(e="Light"),t(e);case 11:case"end":return n.stop()}}),null,null,[[0,6]],Promise)}()}),[]);var a=function(){var e;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(e="Dark"===n?"Light":"Dark"),a.prev=2,a.next=5,r.a.awrap(l.a.setItem("@theme",e));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),console.log("failed to set theme");case 10:case"end":return a.stop()}}),null,null,[[2,7]],Promise)};return o.a.createElement(E.a,null,o.a.createElement(S.b.Item,{title:"Dark Theme",onPress:a,left:function(e){return o.a.createElement(F.a,dt()({},e,{icon:"brightness-6",onPress:a}))},right:function(e){return o.a.createElement(we.a,dt()({onPress:a},e,{status:"Dark"===n?"checked":"unchecked"}))}}))})),vt=n(218),ht=n.n(vt),gt=n(346),bt=n.n(gt),wt=q.a.create({leftIcon:{left:-5}});function Et(e){var t=Object(c.useState)(!1),n=w()(t,2),a=n[0],s=n[1],i=Object(c.useState)(new Map),u=w()(i,2),l=u[0],m=u[1],d=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(oe.list());case 3:e=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error("Failed to load ledger",t.t0),t.abrupt("return");case 10:if(e){t.next=12;break}return t.abrupt("return");case 12:m(e);case 13:case"end":return t.stop()}}),null,null,[[0,6]],Promise)};Object(c.useEffect)((function(){d()}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){m(new Map(l.entries()))}),6e4);return function(){return clearInterval(e)}}));var p=Array.from(l.entries());return 0===l.size?null:o.a.createElement(E.a,null,o.a.createElement(S.b.Accordion,{expanded:a,onPress:function(){return s(!a)},title:"Downloaded Cultures",left:function(e){return o.a.createElement(S.b.Icon,dt()({},e,{icon:"download",style:wt.leftIcon}))}},o.a.createElement(_.a,{data:p,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item,n=w()(t,2),a=n[0],c=n[1];return o.a.createElement(S.b.Item,{title:a,description:"Last modified "+ht()().to(ht.a.unix(c)),right:function(e){return o.a.createElement(F.a,dt()({},e,{icon:"delete",onPress:function(){return function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return l.delete(e),t.prev=1,t.next=4,r.a.awrap(oe.remove(e));case 4:t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(1),console.error("Failed to remove downloaded culture: ",t.t0),t.abrupt("return");case 10:m(new Map(l.entries()));case 11:case"end":return t.stop()}}),null,null,[[1,6]],Promise)}(a)}}))}})}})),a&&o.a.createElement(I.a,{mode:"contained",onPress:function(){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(oe.update());case 3:d(),e.onUpdateFinish(null),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.onUpdateFinish(t.t0.toString()),console.error("Failed to update downloaded cultures: ",t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}},"Update All"))}ht.a.extend(bt.a);var yt=q.a.create({leftIcon:{left:-5},input:{padding:20},characterCounter:{fontSize:11,right:22,position:"absolute",bottom:20,paddingRight:2,paddingBottom:2},button:{padding:15,margin:10}});function xt(){var e=Object(c.useState)(!1),t=w()(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=w()(s,2),u=i[0],l=i[1],m=Object(c.useState)("writing"),d=w()(m,2),p=d[0],f=d[1];return o.a.createElement(E.a,null,o.a.createElement(S.b.Accordion,{left:function(e){return o.a.createElement(S.b.Icon,dt()({},e,{style:yt.leftIcon,icon:"message-reply-text"}))},expanded:n,onPress:function(){return a(!n)},title:"Feedback"},"sent"===p&&o.a.createElement(I.a,{icon:"check",color:"green",mode:"contained",style:yt.button,onPress:function(){f("writing"),l("")}},"Thank you"),"failed"===p&&o.a.createElement(I.a,{icon:"alert",color:"yellow",mode:"contained",style:yt.button,onPress:function(){return f("writing")}},"Try again later"),("writing"===p||"sending"===p)&&o.a.createElement(ge.a,{style:yt.input,mode:"outlined",multiline:!0,label:"Where can we improve?",value:u,onChangeText:function(e){e.length>300||l(e)},numberOfLines:4,right:"writing"===p?o.a.createElement(ge.a.Icon,{name:"send",onPress:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==u){e.next=2;break}return e.abrupt("return");case 2:return f("sending"),e.prev=3,e.next=6,r.a.awrap(se.send(u));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),f("failed"),e.abrupt("return");case 12:f("sent");case 13:case"end":return e.stop()}}),null,null,[[3,8]],Promise)}}):o.a.createElement(ge.a.Icon,{name:"check"})}),("writing"===p||"sending"===p)&&o.a.createElement(Ue.a,{style:yt.characterCounter},u.length+"/300")))}var kt=q.a.create({leftIcon:{left:-5}});function Ot(e){var t=e.token,n=e.email,a=e.logout,s=e.navigation,i=Object(c.useState)(!1),u=w()(i,2),m=u[0],d=u[1],p=Object(c.useState)(!1),f=w()(p,2),v=f[0],h=f[1];Object(c.useEffect)((function(){!function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(l.a.getItem("@rememberedEmail"));case 3:e=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),h(!1),t.abrupt("return");case 10:e&&h(!0);case 11:case"end":return t.stop()}}),null,null,[[0,6]],Promise)}()}),[]);var g=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=v,e.next=!0===e.t0?3:!1===e.t0?14:24;break;case 3:return e.prev=3,e.next=6,r.a.awrap(l.a.removeItem("@rememberedEmail"));case 6:e.next=12;break;case 8:return e.prev=8,e.t1=e.catch(3),h(!1),e.abrupt("return");case 12:return h(!1),e.abrupt("break",24);case 14:return e.prev=14,e.next=17,r.a.awrap(l.a.setItem("@rememberedEmail",n));case 17:e.next=23;break;case 19:return e.prev=19,e.t2=e.catch(14),h(!1),e.abrupt("return");case 23:h(!0);case 24:case"end":return e.stop()}}),null,null,[[3,8],[14,19]],Promise)};return o.a.createElement(E.a,null,o.a.createElement(S.b.Accordion,{expanded:m,onPress:function(){return d(!m)},title:"Account",left:function(e){return o.a.createElement(S.b.Icon,dt()({},e,{icon:"account",style:kt.leftIcon}))}},""!==t&&o.a.createElement(S.b.Item,{title:"Remember Email",onPress:function(){return g()},left:function(e){return o.a.createElement(F.a,dt()({},e,{icon:"email",onPress:function(){return g()}}))},right:function(e){return o.a.createElement(we.a,dt()({onPress:function(){return g()}},e,{status:v?"checked":"unchecked"}))}})),m&&o.a.createElement(E.a,null,t?o.a.createElement(I.a,{icon:"logout",mode:"contained",onPress:function(){a(),s.navigate("Home")}},"Log Out"):o.a.createElement(I.a,{icon:"login",mode:"contained",onPress:function(){s.navigate("Login")}},"Log In")))}var Pt=q.a.create({rightIcon:{right:-5},leftIcon:{left:-5}});var jt=Object(s.b)((function(e,t){return{token:e.user.token,email:e.user.user.email,navigation:t.navigation}}),(function(e){return Object(i.a)({resetUser:Se},e)}))((function(e){var t=e.token,n=e.email,a=e.resetUser,r=e.navigation,s=function(){return A.a.openURL("http://www.google.com")},i=Object(c.useState)(""),u=w()(i,2),l=u[0],m=u[1];return o.a.createElement(pt.a,null,o.a.createElement(ft,null),o.a.createElement(at.a,null),o.a.createElement(S.b.Item,{title:"Disclaimer",onPress:s,left:function(e){return o.a.createElement(F.a,dt()({},e,{style:Pt.leftIcon,onPress:s,icon:"file-document-outline"}))},right:function(e){return o.a.createElement(F.a,dt()({},e,{icon:"eye",style:Pt.rightIcon,onPress:s}))}}),o.a.createElement(at.a,null),o.a.createElement(Ot,{email:n,navigation:r,token:t,logout:a}),o.a.createElement(at.a,null),o.a.createElement(xt,null),o.a.createElement(at.a,null),o.a.createElement(Et,{onUpdateFinish:function(e){return m(e||"Update finished")}}),o.a.createElement(C.a,null,o.a.createElement(R.a,{visible:""!==l,onDismiss:function(){return m("")},action:{label:"Ok",onPress:function(){return m("")}}},l)))})),St=n(35),It=q.a.create({view:{flex:1,justifyContent:"center"},ripple:{marginRight:15}});var Ct=Object(s.b)((function(e,t){return{name:e.user.user.name,navigation:t.navigation}}),null)((function(e){var t=e.name,n=e.navigation;return o.a.createElement(E.a,{style:It.view},""===t?o.a.createElement(F.a,{icon:"dots-vertical",onPress:function(){return n.navigate("Settings")}}):o.a.createElement(St.a,{style:It.ripple,onPress:function(){return n.navigate("Settings")}},o.a.createElement(S.a.Text,{size:32,label:t[0]})))})),Rt=function(e){var t=e.navigation;return{headerRight:function(){return o.a.createElement(Ct,{navigation:t})}}},Tt={prefixes:["/"],config:{screens:{Home:"/",Login:"login",Register:"register/:token",Recovery:"recovery/:email/:token",Culture:{path:"culture/:cultureName",parse:{cultureName:function(e){return decodeURI(e)}},screens:{general:"general",specialized:"specialized"}},EditInsight:"culture/edit/:culture/:index",Settings:"settings"}}},Dt=Object(i.c)(Ce);var At=Object(s.b)((function(e){return{theme:e.theme}}),null)((function(e){var t=e.theme,n=Object(f.a)();return o.a.createElement(m.a,{linking:Tt,theme:"Dark"===t?d.a:p.a},o.a.createElement(u.a,{theme:"Dark"===t?Ye:Ge},o.a.createElement(n.Navigator,{initialRouteName:"Home"},o.a.createElement(n.Screen,{name:"Culture",component:he,options:Rt}),o.a.createElement(n.Screen,{name:"Home",component:nt,options:function(e){var t=e.navigation;return{headerRight:function(){return o.a.createElement(Ct,{navigation:t})},title:"Cultural Awareness"}}}),o.a.createElement(n.Screen,{name:"Login",component:ze}),o.a.createElement(n.Screen,{name:"Register",component:Be}),o.a.createElement(n.Screen,{name:"EditInsight",component:ot}),o.a.createElement(n.Screen,{name:"Settings",component:jt}),o.a.createElement(n.Screen,{name:"Recovery",component:lt}))))}));t.default=Object(v.a)((function(){return Object(c.useEffect)((function(){!function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.awrap(l.a.getItem("@theme"));case 3:e=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e="Light";case 9:e||(e="Light"),Dt.dispatch(Ie(e));case 11:case"end":return t.stop()}}),null,null,[[0,6]],Promise)}()}),[]),o.a.createElement(s.a,{store:Dt},o.a.createElement(At,null))}))}},[[370,1,2]]]);
//# sourceMappingURL=app.e6859a25.chunk.js.map